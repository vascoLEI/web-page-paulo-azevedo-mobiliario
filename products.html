<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paulo Azevedo Mobiliário</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="logoicon.png">
</head>

<body>
  <header>
    <nav class="navbar">
      <h1 class="logo">
        <a href="index.html">
          <img src="images/Logo.png" alt="Paulo Azevedo Mobiliário" class="logo-img">
        </a>
      </h1>

      <button class="nav-toggle" aria-label="Abrir menu">
        ☰
      </button>

      <ul class="nav-links">
        <li><a href="products.html">Produtos</a></li>
        <li><a href="about.html">Sobre nós</a></li>
        <li><a href="contacts.html">Contactos</a></li>
      </ul>
    </nav>
  </header>

  <section class="produtos-page">
    <div class="produtos-header">
      <h2>Os nossos produtos</h2>
      <p>Alguns exemplos de mobiliário, estofos e colchões disponíveis na loja.</p>
    </div>

    <div class="filtros-wrapper">
      <div class="filtros">
        <button class="filtro-btn active" data-filter="all">Todos</button>
        <button class="filtro-btn" data-filter="sala">Salas</button>
        <button class="filtro-btn" data-filter="quarto">Quartos</button>
        <button class="filtro-btn" data-filter="colchao">Colchões</button>
        <button class="filtro-btn" data-filter="decoracao">Decoração</button>
        <button class="filtro-btn" data-filter="aparador">Aparadores</button>
        <button class="filtro-btn" data-filter="sofa">Sofás</button>
      </div>
    </div>

    <div class="produtos-grid-page" id="produtos-grid"></div>
  </section>

  <footer>
    <p>&copy; 2025 Paulo Azevedo Mobiliário</p>
  </footer>

  <div class="lightbox" id="lightbox-produto">
    <img src="" alt="Produto ampliado">
  </div>

  <script src="listOfProducts.js"></script>

  <script>
    function renderProdutos(lista) {
      const grid = document.getElementById('produtos-grid');
      if (!grid) return;

      grid.innerHTML = lista.map(p => `
        <article class="produto-card" data-categoria="${p.categoria}">
          <img src="${p.imagem}" alt="${p.nome}">
          <h3>${p.nome}</h3>
          <p>${p.descricao || ""}</p>
        </article>
      `).join('');
    }

    function initFiltros() {
      const filtroBtns = document.querySelectorAll(".filtro-btn");

      filtroBtns.forEach(btn => {
        btn.addEventListener("click", () => {
          const filtro = btn.dataset.filter;
          const produtos = document.querySelectorAll(".produto-card");

          filtroBtns.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");

          produtos.forEach(prod => {
            const categoria = prod.dataset.categoria;
            if (filtro === "all" || categoria === filtro) {
              prod.style.display = "block";
            } else {
              prod.style.display = "none";
            }
          });
        });
      });
    }

    function setupHeaderShrink() {
      const header = document.querySelector('header');
      if (!header) return;

      window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
          header.classList.add('header-small');
        } else {
          header.classList.remove('header-small');
        }
      });
    }


    function setupMobileMenu() {
      const toggle = document.querySelector('.nav-toggle');
      const navLinks = document.querySelector('.nav-links');
      if (!toggle || !navLinks) return;

      toggle.addEventListener('click', () => {
        navLinks.classList.toggle('open');
      });
    }


    function initLightboxProdutos() {
      const lightbox = document.getElementById('lightbox-produto');
      if (!lightbox) return;

      const lightboxImg = lightbox.querySelector('img');

      function ligarListeners() {
        const produtoImgs = document.querySelectorAll('.produto-card img');

        produtoImgs.forEach(img => {
          img.addEventListener('click', () => {
            lightboxImg.src = img.src;
            lightbox.style.display = 'flex';
            document.body.classList.add('lightbox-open'); 
          });
        });
      }

      function fecharLightbox() {
        lightbox.style.display = 'none';
        lightboxImg.src = '';
        document.body.classList.remove('lightbox-open');
      }

      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
          fecharLightbox();
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          fecharLightbox();
        }
      });

      ligarListeners();
    }

    window.addEventListener('load', () => {
      renderProdutos(PRODUTOS);  
      initFiltros();             
      setupHeaderShrink();       
      setupMobileMenu();         
      initLightboxProdutos();    
    });
  </script>

</body>
</html>
